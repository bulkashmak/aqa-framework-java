## DBO B2B AQA Framework

### О проекте:
Проект по АФТ команды Uzum Business

### Стек:
- Eclipse OpenJDK18
- Spring boot
- Junit5
- Rest Assured
- Lombok

Для комфортной работы на IDE необходимо установить плагин Lombok Plugin.

### Как запустить?

1) `File -> Settings -> Build, Execution, Deployment > Build Tools > Maven > User settings file > Override` указать путь до `.mvn/local-settings.xml` с корня проекта.
2) Если нужен новый dto то пишем его в qahelper если нет то они все в qa-helper-lib.
3) Пишем тесты.

### Правила написания DTO.
1) DTO хранятся в пакете клиента ~/src/main/java/uz/{client}/dto/
2) Пакеты в DTO строятся по принципу service -> feature -> request/response

### Правила написания Services.
1) На каждый продукт должен быть свой Service Class в котором описываются http методы.
2) Каждый метод должен быть помечен аннотацией `@Step` с передачей в него информации того, что он делает.
3) В каждый метод должна прокидывать определенная DTO при наличии body.
4) При наличии параметров с определенным значением выборки варианты параметров прописываются в комментариях в соответсвии со стандартом Javadoc.

### Правила написания tests.
1) Каждый тестовый класс должен быть помечен аннотациями `@Section` и  `@Owner`.
2) Каждый метод теста должен быть помечен аннотациями `@Test`, `@L1 @L2...`, `@Description`, `@AllureId`.
3) Каждый эндпоинт должен быть покрыт позитивными и негативными тестами.
4) Базовый перечень  тестов:<br />
   Для get: 
   1) позитивные
      1) вернулась 1 сущность
      2) вернулось несколько сущностей
   2) негативные
      1) сущность не существует 
      2) сущность принадлежит другому пользователю
      3) авторизация не пройдена

   Для post:
   1) позитивные
      1) сущность создана
   2) негативные
      1) авторизация не пройдена
      2) сущность принадлежит другому пользователю
      3) граничные значения
      4) согласно документации
      
   Для put:
   1) позитивные 
      1) сущность изменена 
   2) негативные 
      1) повторный вызов 
      2) авторизация не пройдена 
      3) сущность принадлежит другому пользователю
      4) граничные значения
      5) согласно документации

   Для delete:
   1) позитивные
      1) сущность удалена
   2) негативные
      1) повторный вызов / сущность не существует
      2) авторизация не пройдена
      3) сущность принадлежит другому пользователю
      4) граничные значения
      5) согласно документации


[qa-helper-lib]: <https://jfrog.uholding.uz/artifactory/qa-maven-local/qahelper/qa-helper-lib/>

##Gitflow

###Пример того, как должен выглядеть gitflow
1) Заведена задача в Jira
2) Разработчик создает новую ветку от ветки dev и называется ее в соответствии с id задачи
3) Выполняет задачу в своей ветке и после завершения создает merge request обратно в ветку dev (рекомендуется удалить ветку, если задача была выполнена)
4) Проводится code review. Если были найдены недочеты, разработчик должен их исправить

###Ветка main
- Основная ветка проекта
- Запрещено осуществлять commit и push в ветку main
- Разрешено осуществлять merge request
- На данной ветке происходит сборка проекта в CI/CD

###Ветка dev
- Ветка в которую вливаются все изменения из других веток
- От данной ветки отпачковываемся в main
- Не рекомендуется (но разрешено) осуществлять commit и push в ветку dev

###Нейминг веток
Ветка может быть трех типов:
- Task. В таких ветках ведется разработка функционала или написание авто-тестов в соответствии с задачей. Название ветки соответствует номеру задачи в Jira. Пример: DL-777
- Feature. В таких ветках ведется разработка или доработка функционала, если на это не заведена отдельная задача. Название ветки должно начинаться с префикса "feature_". Пример: feature_maven-profiles
- Bugfix. В таких ветках осуществляется исправление ошибок в проекте, если на это не была заведена отдельная задача. Название ветки должно начинаться с префикса "bugfix_". Пример: bugfix_sign-in
