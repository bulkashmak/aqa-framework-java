## api-middle-tests

### О проекте:
Проект с автотестами для бизнес слоя

### Стек:
- Java(openjdk18)
- [qa-helper-lib]
- Spring-boot
- Lombok

Для комфортной работы на IDE необходимо установить плагин Lombok Plugin.

### Как запустить?

1) `File -> Settings -> Build, Execution, Deployment > Build Tools > Maven > User settings file > Override` указать путь до `.mvn/local-settings.xml` с корня проекта.
2) Если нужен новый dto то пишем его в qahelper если нет то они все в qa-helper-lib.
3) Пишем тесты.

### Правила написания DTO.
1) Общие DTO находятся в проекте qahelper.
> Либа с dto апдейтится раз в 5 минут или `mvn -U, --update-snapshots`
2) DTO бизнес слоя находятся локально в `src/main/java/uz/dto`
3) Названия пакетов должны соотвествовать продукту и route. 
e.g. для route /api/auth/start путь должен быть `src/main/java/uz/dto/auth/start`. 
Внутри пакета должно быть 2 пакета - request и response. Наименование класса должно соответствовать структуре
   (Response/Request)(HttpMethod)(Entity) e.g. - `ResponseGetAccount`.
4) Для описания вложенных JSON используются Статические вложенные классы.
5) DTO базовых ошибок описывается в `src/main/java/uz/dto/common`
6) DTO базовых структур (Meta, ValueDescription...) описывается в `src/main/java/uz/dto/common`

### Правила написания Services.
1) На каждый продукт должен быть свой Service Class в котором описываются http методы.
2) Каждый метод должен быть помечен аннотацией `@Step` с передачей в него информации того, что он делает.
3) В каждый метод должна прокидывать определенная DTO при наличии body.
4) При наличии параметров с определенным значением выборки варианты параметров прописываются в комментариях в соответсвии со стандартом Javadoc.

### Правила написания tests.
1) Каждый тестовый класс должен быть помечен аннотациями `@Section` и  `@Owner`.
2) Каждый метод теста должен быть помечен аннотациями `@Test`, `@L1 @L2...`, `@Description`, `@AllureId`.
3) Каждый эндпоинт должен быть покрыт позитивными и негативными тестами.
4) Базовый перечень  тестов:<br />
   Для get: 
   1) позитивные
      1) вернулась 1 сущность
      2) вернулось несколько сущностей
   2) негативные
      1) сущность не существует 
      2) сущность принадлежит другому пользователю
      3) авторизация не пройдена

   Для post:
   1) позитивные
      1) сущность создана
   2) негативные
      1) авторизация не пройдена
      2) сущность принадлежит другому пользователю
      3) граничные значения
      4) согласно документации
      
   Для put:
   1) позитивные 
      1) сущность изменена 
   2) негативные 
      1) повторный вызов 
      2) авторизация не пройдена 
      3) сущность принадлежит другому пользователю
      4) граничные значения
      5) согласно документации

   Для delete:
   1) позитивные
      1) сущность удалена
   2) негативные
      1) повторный вызов / сущность не существует
      2) авторизация не пройдена
      3) сущность принадлежит другому пользователю
      4) граничные значения
      5) согласно документации


[qa-helper-lib]: <https://jfrog.uholding.uz/artifactory/qa-maven-local/qahelper/qa-helper-lib/>